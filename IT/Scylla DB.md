### Scylla DB 기반 압축 알고리즘 분석 공부
이 글은 팀노바 기술 블로그의 [연구자료(4기 이소현 팀원 작성)](https://teamnovatech.co.kr/pageread/KR/472)를 이해하기 위해 정리하는 단순 메모장 역할이므로 자세한 내용은 본 연구자료를 참조할 것.

- 압축방식에 따른 압축률 Snappy < LZ4 < Zlib

### LZ77(Sliding window) 
- 반복된 문자열의 중복을 기반으로 데이터를 압축하는 방식을 사용

### Zlib 압축 동작 방식
- 1955년 만들어진 무손실 압축 방식
- libpng 이미지 압축을 목적으로 만들어짐
- LZ77 방식으로 바이트 압축 후 허프만 인코더를 통해 다시 압축
- 우수한 압축률을 목표로 함

### Huffman encoding
- 문자 빈도수로 허프만 트리 구축
- 빈도수가 가장 많은 문자를 가장 작은 크기의 데이터로 부호화
- Zlib에서 중복되는 문자열 길이와 문자열 사이의 거리를 인코딩하여 압축  
ex) a<u>cat</u>isthre<u>cat</u>  
    문자열 길이 : 3  
    문자열 사이 거리 : 9

### Snappy 압축 동작 방식
- 2011년 Google에서 C로 개발
- C를 사용해 빠른 인코딩/디코딩 속도와 합리적인 압축률을 목표
- 먼저 Search buffer와 Look-ahead buffer가 동일한지 전체 검색 후 두 buffer의 byte가 일치하지 않는 경우 Look-ahead buffer에서 매 3바이트마다 일치항목이 있는지 검색

### LZ4 압축 동작 방식
- 2011년 Yann Collet이 C로 개발
- 빠른 디코딩 속도, 멀티코어 활용을 목적으로 한 무손실 압축 방식
- 16개의 사전과 Look-ahead window에 있는 데이터를 동시 비교하여 높은 압축률을 가능케 함

### LZ4 압축 순서
1. Allocator(데이터 전달)
2. Dictionaries(문자열 비교)
3. Compare_match(가장 긴 일치 길이 찾아 배치)
4. Compare_data_write(데이터 압축)

### 압축률의 차이가 나는 이유
1. 압축 방식별 메모리 설정 변수가 각각 다름
2. 압축된 데이터의 차이

### 결론
- Zlib은 모든 컴퓨터 하드웨어 운영체제에서 사용이 가능함. 메모리 사용 제한도 가능하기 때문에 임베디드에서 주로 사용됨
- LZ4는 압축률, 압축시간, 메모리 사용 등을 고려하여 선택이 가능. DB인 Cassandra, Hbase, Redis와 그 밖에도 게임, 그래픽 등의 다양한 분야에서 활용됨
- Snappy는 다른 압축방식에 비해 중복 문자열을 찾는데 드는 비용이 적기 때문에 데이터를 빠르게 저장, 처리해야 하는 상황. 즉, Hadoop, MapReduce와 같은 빅데이터 처리에 주로 사용됨

### 해당 분석을 통해 배운 것
1. 압축이라는 것에 대해 알기 전에는 막연함과 거리감이 느껴졌었는데 어떤 기술로 만들어졌는지 살펴보고 나니 자료 구조와 알고리즘을 적절히 활용하여 만든 작은 소프트웨어란 생각이 들었다.
2. 연구를 통해서 해당 기술에 대해 깊이 있게 이해할 수 있으며 동작 원리를 이해함으로써 적재적소에 맞게 활용할 수 있게 된다.
3. 연구를 공유함으로 개발자 세계에 기여할 수 있다.


